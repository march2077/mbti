<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NaNaè¥¿é«˜åœ°ç™½æ¢— MBTI æ·±åº¦äººæ ¼æ¸¬è©¦</title>
    
    <!-- å¼•å…¥ Google Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Noto+Sans+TC:wght@400;700&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,700,1,0&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* ğŸ¨ é…è‰²è¨­å®š */
            --bg-color: #fffaf0; 
            --card-bg: #ffe1e6; /* æŸ”å’Œæ·¡ç²‰è‰² */
            
            --text-main: #5d4037;
            --text-sub: #8d6e63;
            
            --accent-pink: #ffb7c5;
            --accent-pink-dark: #ff8fa3;
            --accent-blue: #a0e7e5;
            --accent-yellow: #fff59d;
            --accent-purple: #e0bbe4;
            
            --border-radius: 30px;
            --shadow: 0 10px 30px rgba(255, 143, 163, 0.4);
        }

        body {
            font-family: 'Fredoka', 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#ffecb3 20%, transparent 20%), radial-gradient(#ffecb3 20%, transparent 20%);
            background-position: 0 0, 25px 25px;
            background-size: 50px 50px;
            color: var(--text-main);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* è¨­å®šåœ–æ¨™çš„æ¨£å¼ */
        .material-symbols-rounded {
            vertical-align: text-bottom;
            font-size: 1.1em;
        }

        .floating-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .paw-bg {
            position: absolute;
            font-size: 2rem;
            opacity: 0;
            animation: floatUp 20s infinite linear;
            top: 0;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            20% { opacity: 0.8; }
            80% { opacity: 0.8; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .container {
            position: relative;
            z-index: 10;
            width: 88%;
            max-width: 500px;
            background: var(--card-bg);
            padding: 40px 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: all 0.3s ease;
            border: 5px solid #fff;
        }

        /* åœ–ç‰‡å®¹å™¨èˆ‡ç¾é¡ç‰¹æ•ˆ */
        .img-wrapper {
            width: 100%;
            height: 280px; 
            border-radius: 25px;
            overflow: hidden;
            margin-bottom: 25px;
            border: 8px solid #ffffff; 
            box-shadow: 0 8px 20px rgba(255, 183, 197, 0.6);
            position: relative;
            background-color: #fff;
        }

        .img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s, filter 0.5s;
            filter: brightness(1.15) contrast(0.95) saturate(1.2) sepia(0.15);
        }

        .img-wrapper:hover img {
            transform: scale(1.08) rotate(2deg);
            filter: brightness(1.2) contrast(1) saturate(1.25) sepia(0.1);
        }

        h1 {
            margin: 0 0 10px 0;
            color: #ffffff; 
            text-shadow: 2px 2px 0 rgba(0,0,0,0.1);
            font-size: 1.8rem;
            letter-spacing: 1px;
        }

        h2 {
            color: var(--text-main);
            margin-bottom: 15px;
        }

        p {
            color: #7d5a50;
            line-height: 1.6;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* ä¸»è¦æŒ‰éˆ• */
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-pink-dark));
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 6px 15px rgba(255, 143, 163, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            width: 85%;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            
            /* è®“æŒ‰éˆ•å…§çš„åœ–æ¨™è·Ÿæ–‡å­—å°é½Š */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* è®“æŒ‰éˆ•è£¡çš„ Google Icon è®Šæˆç™½è‰² */
        .btn-primary .material-symbols-rounded {
            color: #fff; 
            font-size: 1.3rem;
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: rgba(255,255,255,0.25);
            border-radius: 50px 50px 0 0;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 20px rgba(255, 143, 163, 0.6);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        /* æ€§åˆ¥é¸æ“‡æŒ‰éˆ• */
        .gender-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .btn-gender {
            background: #fffde7; 
            border: 3px solid #f0f0f0;
            border-radius: 25px;
            padding: 20px;
            width: 130px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05);
        }

        .btn-gender:hover {
            background: #fff0f5;
            border-color: var(--accent-pink);
            transform: translateY(-5px);
        }

        .btn-gender.selected {
            border-color: var(--accent-pink-dark);
            background: #ffb7c5; 
            box-shadow: 0 0 0 4px rgba(255, 183, 197, 0.3);
        }

        .gender-icon {
            font-size: 3.5rem;
            margin-bottom: 10px;
            filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.1));
        }

        .gender-text {
            color: var(--text-main);
            font-weight: bold;
        }

        /* é€²åº¦æ¢ */
        .progress-track {
            width: 100%;
            height: 18px;
            background: rgba(255,255,255,0.5); 
            border-radius: 20px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
            border: 2px solid #fff;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }

        .progress-fill {
            height: 100%;
            background: repeating-linear-gradient(
                45deg,
                var(--accent-blue),
                var(--accent-blue) 10px,
                #b4f0ee 10px,
                #b4f0ee 20px
            );
            width: 0%;
            transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 20px;
        }

        /* é¡Œç›®æ¨£å¼ */
        .question-card {
            min-height: 130px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            background: #fffbf0; 
            border-radius: 20px;
            padding: 15px;
            border: 4px solid #fff; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-main);
            line-height: 1.5;
        }

        /* 5åˆ†é‡è¡¨é¸é … */
        .options-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
        }

        .scale-btn {
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.6rem;
            background: #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }

        .scale-btn:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .scale-1 { width: 50px; height: 50px; color: #ff8a80; border-color: #ffcdd2; background: #ffebee; }
        .scale-2 { width: 42px; height: 42px; color: #ffab91; border-color: #ffccbc; background: #fbe9e7; }
        .scale-3 { width: 38px; height: 38px; color: #bcaaa4; border-color: #d7ccc8; background: #efebe9; }
        .scale-4 { width: 42px; height: 42px; color: #a5d6a7; border-color: #c8e6c9; background: #e8f5e9; }
        .scale-5 { width: 50px; height: 50px; color: #66bb6a; border-color: #a5d6a7; background: #c8e6c9; }

        .labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #7d5a50;
            margin-top: 15px;
            padding: 0 10px;
            font-weight: bold;
        }

        /* çµæœé  */
        .result-type {
            font-size: 3.5rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 2px 2px 0 var(--text-main);
            margin-bottom: 5px;
            font-family: 'Fredoka', cursive;
        }
        
        .result-title {
            font-size: 1.6rem;
            font-weight: bold;
            color: var(--text-main);
            margin-bottom: 15px;
        }
        
        .tags {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .tag {
            background: var(--accent-yellow);
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 0.95rem;
            color: #795548;
            border: 2px solid #fff;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
            font-weight: bold;
        }

        .desc-box {
            background: #fff;
            padding: 25px;
            border-radius: 20px;
            text-align: left;
            margin-bottom: 25px;
            border-left: 6px solid var(--accent-blue);
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
        }

        .desc-box p {
            margin: 0;
            color: #5d4037;
        }

        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hidden { display: none; }

    </style>
</head>
<body>

<div class="floating-bg" id="bg-animation"></div>

<!-- 1. å°é¢é  -->
<div class="container fade-in" id="start-page">
    <div class="img-wrapper">
        <img src="" alt="Westie Cover" id="cover-img">
    </div>
    <h1>ğŸ¾ NaNaè¥¿é«˜åœ° <br>MBTI äººæ ¼æ¸¬è©¦</h1>
    <p>é€éè¡Œç‚ºåˆ†æï¼Œæ‰¾å‡ºä½ å®¶å¯¶è²çš„éš±è—æ€§æ ¼ï¼<br>ï¼ˆå¯æ„›ç‰¹åˆ¥ç‰ˆ âœ¨ï¼‰</p>
    <button class="btn-primary" onclick="goToGender()">é–‹å§‹æ¸¬è©¦ GO!</button>
</div>

<!-- 2. æ€§åˆ¥é¸æ“‡é  -->
<div class="container hidden" id="gender-page">
    <h2>ğŸ¶ è«‹å•å¯¶è²æ˜¯ï¼Ÿ</h2>
    <p>é¸å€‹æ€§åˆ¥ï¼Œè®“æˆ‘å€‘å¹«ä½ æ­é…é€ å‹ï¼</p>
    
    <div class="gender-options">
        <div class="btn-gender" id="btn-boy" onclick="selectGender('boy')">
            <span class="gender-icon">ğŸ§¢</span>
            <span class="gender-text">å¸¥æ°£åº•è¿ª</span>
        </div>
        <div class="btn-gender" id="btn-girl" onclick="selectGender('girl')">
            <span class="gender-icon">ğŸ‘’</span>
            <span class="gender-text">æ¼‚äº®ç¾çœ‰</span>
        </div>
    </div>
    
    <button class="btn-primary" onclick="confirmGender()">ä¸‹ä¸€æ­¥</button>
</div>

<!-- 3. æ¸¬é©—é  -->
<div class="container hidden" id="quiz-page">
    <div class="progress-track">
        <div class="progress-fill" id="progress-bar"></div>
    </div>
    
    <div class="question-card">
        <div class="question-text" id="question-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
    </div>

    <div class="options-scale">
        <button class="scale-btn scale-1" onclick="answer(1)">ğŸ˜¤</button>
        <button class="scale-btn scale-2" onclick="answer(2)">ğŸ¤”</button>
        <button class="scale-btn scale-3" onclick="answer(3)">ğŸ˜</button>
        <button class="scale-btn scale-4" onclick="answer(4)">â˜ºï¸</button>
        <button class="scale-btn scale-5" onclick="answer(5)">ğŸ˜</button>
    </div>
    <div class="labels">
        <span>ä¸ç¬¦åˆ</span>
        <span>éå¸¸ç¬¦åˆ</span>
    </div>
</div>

<!-- 4. çµæœé  -->
<div class="container hidden" id="result-page">
    <h2>âœ¨ æ¸¬é©—çµæœå‡ºçˆ âœ¨</h2>
    <div class="img-wrapper" id="result-img-container" style="border-color: #fff;">
        <img id="result-img" src="" alt="Result Dog">
    </div>
    
    <div class="result-type" id="result-mbti">ESTP</div>
    <div class="result-title" id="result-role">å†’éšªç‹</div>

    <div class="tags" id="result-tags"></div>

    <div class="desc-box">
        <p id="result-desc" style="font-size: 1rem;">çµæœæè¿°...</p>
    </div>

    <button class="btn-primary" onclick="restart()">å†ç©ä¸€æ¬¡ <span class="material-symbols-rounded">refresh</span></button>
</div>

<script>
    const imageUrls = {
        "cover": "images/cover.jpg",
        "INTJ_boy": "images/INTJ_boy.jpg",
        "INTJ_girl": "images/INTJ_girl.jpg",
        "INTP_boy": "images/INTP_boy.jpg",
        "INTP_girl": "images/INTP_girl.jpg",
        "ENTJ_boy": "images/ENTJ_boy.jpg",
        "ENTJ_girl": "images/ENTJ_girl.jpg",
        "ENTP_boy": "images/ENTP_boy.jpg",
        "ENTP_girl": "images/ENTP_girl.jpg",
        "INFJ_boy": "images/INFJ_boy.jpg",
        "INFJ_girl": "images/INFJ_girl.jpg",
        "INFP_boy": "images/INFP_boy.jpg",
        "INFP_girl": "images/INFP_girl.jpg",
        "ENFJ_boy": "images/ENFJ_boy.jpg",
        "ENFJ_girl": "images/ENFJ_girl.jpg",
        "ENFP_boy": "images/ENFP_boy.jpg",
        "ENFP_girl": "images/ENFP_girl.jpg",
        "ISTJ_boy": "images/ISTJ_boy.jpg",
        "ISTJ_girl": "images/ISTJ_girl.jpg",
        "ISFJ_boy": "images/ISFJ_boy.jpg",
        "ISFJ_girl": "images/ISFJ_girl.jpg",
        "ESTJ_boy": "images/ESTJ_boy.jpg",
        "ESTJ_girl": "images/ESTJ_girl.jpg",
        "ESFJ_boy": "images/ESFJ_boy.jpg",
        "ESFJ_girl": "images/ESFJ_girl.jpg",
        "ISTP_boy": "images/ISTP_boy.jpg",
        "ISTP_girl": "images/ISTP_girl.jpg",
        "ISFP_boy": "images/ISFP_boy.jpg",
        "ISFP_girl": "images/ISFP_girl.jpg",
        "ESTP_boy": "images/ESTP_boy.jpg",
        "ESTP_girl": "images/ESTP_girl.jpg",
        "ESFP_boy": "images/ESFP_boy.jpg",
        "ESFP_girl": "images/ESFP_girl.jpg"
    };

    window.onload = function() {
        if (imageUrls["cover"]) {
            document.getElementById('cover-img').src = imageUrls["cover"];
        }
        createBackground();
    };

    function createBackground() {
        const bg = document.getElementById('bg-animation');
        const items = ['ğŸŒ¸', 'ğŸ¦´', 'ğŸ¾', 'ğŸ’–', 'â­', 'ğŸ¶']; 
        const colors = ['#ffb7c5', '#ff8fa3', '#fff59d', '#e0bbe4', '#a0e7e5'];
        
        for(let i=0; i<15; i++) {
            const el = document.createElement('div');
            el.className = 'paw-bg';
            el.innerText = items[Math.floor(Math.random() * items.length)];
            el.style.left = Math.random() * 100 + '%';
            el.style.color = colors[Math.floor(Math.random() * colors.length)];
            el.style.animationDuration = (15 + Math.random() * 20) + 's';
            el.style.animationDelay = (Math.random() * 10) + 's';
            el.style.fontSize = (1.5 + Math.random() * 1.5) + 'rem';
            bg.appendChild(el);
        }
    }

    let currentQ = 0;
    let scores = { EI: 0, SN: 0, TF: 0, JP: 0 };
    let selectedGender = null;

    function goToGender() {
        document.getElementById('start-page').classList.add('hidden');
        const gPage = document.getElementById('gender-page');
        gPage.classList.remove('hidden');
        gPage.classList.add('fade-in');
    }

    function selectGender(gender) {
        selectedGender = gender;
        document.getElementById('btn-boy').classList.remove('selected');
        document.getElementById('btn-girl').classList.remove('selected');
        document.getElementById(`btn-${gender}`).classList.add('selected');
    }

    function confirmGender() {
        if (!selectedGender) {
            alert("è«‹å…ˆé¸æ“‡ç‹—ç‹—çš„æ€§åˆ¥å–”ï¼ğŸ¶");
            return;
        }
        document.getElementById('gender-page').classList.add('hidden');
        startQuiz();
    }

    function startQuiz() {
        const qPage = document.getElementById('quiz-page');
        qPage.classList.remove('hidden');
        qPage.classList.add('fade-in');
        loadQuestion();
    }

    const questions = [
        { text: "å»ç‹—å…¬åœ’æ™‚ï¼Œç‰ æœƒä¸»å‹•è·‘å»è·Ÿæ¯ä¸€éš»ç‹—æ‰“æ‹›å‘¼ã€‚", dim: 'EI', weight: 1 },
        { text: "å®¶è£¡æœ‰é™Œç”Ÿå®¢äººä¾†ï¼Œç‰ æœƒèº²åœ¨æ²™ç™¼ä¸‹æˆ–é è™•è§€å¯Ÿã€‚", dim: 'EI', weight: -1 },
        { text: "è½åˆ°é–€å£æœ‰å‹•éœï¼Œç‰ æœƒç«‹åˆ»å¤§è²å å«é€šçŸ¥å…¨å®¶ã€‚", dim: 'EI', weight: 1 },
        { text: "æ¯”èµ·è·Ÿä¸€ç¾¤ç‹—ç©ï¼Œç‰ æ›´å–œæ­¡è‡ªå·±å®‰éœåœ°èè‰åœ°ã€‚", dim: 'EI', weight: -1 },
        { text: "ç‰ å–œæ­¡æˆç‚ºå…¨å®¶äººçš„ç„¦é»ï¼Œæ²’äººç†ç‰ æœƒä¸€ç›´åˆ·å­˜åœ¨æ„Ÿã€‚", dim: 'EI', weight: 1 },
        { text: "ç‰ éå¸¸æŒ‘é£Ÿï¼Œå°é£Ÿç‰©çš„å‘³é“å’Œå£æ„Ÿæ¥µåº¦æ•æ„Ÿã€‚", dim: 'SN', weight: 1 },
        { text: "ç©ç©å…·æ™‚ï¼Œç‰ æœƒç™¼æ˜å¥‡æ€ªçš„ç©æ³•ï¼ˆä¾‹å¦‚æŠŠçƒè—èµ·ä¾†ï¼‰ã€‚", dim: 'SN', weight: -1 },
        { text: "åªè¦è½åˆ°é›¶é£Ÿè¢‹çš„è²éŸ³ï¼Œä¸ç®¡ç¡å¤šç†Ÿéƒ½æœƒç§’é†’ã€‚", dim: 'SN', weight: 1 },
        { text: "æœ‰æ™‚å€™æœƒå°è‘—ç©ºæ°£ç™¼å‘†ï¼Œå¥½åƒçœ‹åˆ°äº†ä½ çœ‹ä¸åˆ°çš„æ±è¥¿ã€‚", dim: 'SN', weight: -1 },
        { text: "ç‰ å¾ˆæœƒè§€å¯Ÿä¸»äººçš„è‡‰è‰²ï¼Œç”šè‡³é çŸ¥ä½ è¦å‡ºé–€äº†ã€‚", dim: 'SN', weight: -1 },
        { text: "è¢«ç½µçš„æ™‚å€™ï¼Œç‰ æœƒä¸€è‡‰å€”å¼·ï¼Œç”šè‡³æ‰“å“ˆæ¬ è£æ²’äº‹ã€‚", dim: 'TF', weight: 1 },
        { text: "å¦‚æœä½ çœ‹èµ·ä¾†åœ¨å“­ï¼Œç‰ æœƒå®‰éœåœ°é éä¾†èˆ”ä½ çš„æ‰‹ã€‚", dim: 'TF', weight: -1 },
        { text: "æƒ³è¦æ±è¥¿åƒçš„æ™‚å€™ï¼Œæœƒç›´æ¥å‹•æ‰‹æ’¥ä½ æˆ–å å«è¦æ±‚ã€‚", dim: 'TF', weight: 1 },
        { text: "ç‰ å¾ˆæœƒç”¨ç„¡è¾œçš„çœ¼ç¥ï¼ˆç¸®è€³æœµï¼‰ä¾†è®“ä½ å¿ƒè»Ÿã€‚", dim: 'TF', weight: -1 },
        { text: "é‡åˆ°æ¯”è‡ªå·±å¤§çš„ç‹—ï¼Œç‰ æœƒè©•ä¼°æƒ…å‹¢ï¼Œæ‰“ä¸éå°±è·‘ã€‚", dim: 'TF', weight: 1 },
        { text: "æ•£æ­¥æ™‚ä¸€å®šè¦èµ°å›ºå®šçš„è·¯ç·šï¼Œä¸ç„¶æœƒä¸æƒ³èµ°ã€‚", dim: 'JP', weight: 1 },
        { text: "ç¡è¦ºå§¿å‹¢åƒå¥‡ç™¾æ€ªï¼Œèµ°åˆ°å“ªç¡åˆ°å“ªã€‚", dim: 'JP', weight: -1 },
        { text: "æ¯å¤©åƒé£¯æ™‚é–“ä¸€åˆ°ï¼Œå¦‚æœä¸çµ¦é£¯å°±æœƒæº–æ™‚å‚¬ä¿ƒã€‚", dim: 'JP', weight: 1 },
        { text: "å‡ºé–€å‰çœ‹åˆ°ç‰½ç¹©æœƒèˆˆå¥®åˆ°å…¨å®¶äº‚ç«„ï¼Œå¾ˆé›£å†·éœã€‚", dim: 'JP', weight: -1 },
        { text: "å°æ–¼æ–°çš„æŒ‡ä»¤æˆ–è¦çŸ©ï¼Œç‰ é©æ‡‰å¾—å¾ˆå¿«ä¸¦èƒ½éµå®ˆã€‚", dim: 'JP', weight: 1 }
    ];

    function loadQuestion() {
        const progress = (currentQ / questions.length) * 100;
        document.getElementById('progress-bar').style.width = `${progress}%`;
        
        const qText = document.getElementById('question-text');
        qText.style.opacity = 0.5;
        setTimeout(() => {
            qText.innerText = `Q${currentQ + 1}. ${questions[currentQ].text}`;
            qText.style.opacity = 1;
        }, 150);
    }

    function answer(value) {
        const point = value - 3; 
        const q = questions[currentQ];
        scores[q.dim] += point * q.weight;
        currentQ++;
        if (currentQ < questions.length) loadQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('quiz-page').classList.add('hidden');
        const rPage = document.getElementById('result-page');
        rPage.classList.remove('hidden');
        rPage.classList.add('fade-in');

        const type = [
            scores.EI >= 0 ? 'E' : 'I',
            scores.SN >= 0 ? 'S' : 'N',
            scores.TF >= 0 ? 'T' : 'F',
            scores.JP >= 0 ? 'J' : 'P'
        ].join('');

        const data = resultsData[type];
        
        document.getElementById('result-mbti').innerText = type;

        // ğŸŒŸ æ ¸å¿ƒé‚è¼¯ï¼šTitle å€åˆ†ç”·å¥³
        let finalTitle = data.title;
        if (typeof data.title === 'object') {
            finalTitle = data.title[selectedGender]; 
        }
        document.getElementById('result-role').innerText = finalTitle;

        // ğŸŒŸ æ ¸å¿ƒé‚è¼¯å‡ç´šï¼šDescription å€åˆ†ç”·å¥³ (é€™è£¡ä¿®å¾©äº†æ‚¨çš„å•é¡Œ)
        let finalDesc = data.desc;
        if (typeof data.desc === 'object') {
            finalDesc = data.desc[selectedGender]; 
        }
        document.getElementById('result-desc').innerHTML = finalDesc;
        
        const tagsDiv = document.getElementById('result-tags');
        tagsDiv.innerHTML = '';
        data.tags.forEach(tag => {
            const span = document.createElement('span');
            span.className = 'tag';
            span.innerText = `#${tag}`;
            tagsDiv.appendChild(span);
        });

        const img = document.getElementById('result-img');
        const key = type + "_" + selectedGender; 
        
        if (imageUrls[key]) {
            img.src = imageUrls[key];
        } else {
            // é è¨­ä½”ä½åœ–
            img.src = `https://via.placeholder.com/600x600/ffb7c5/ffffff?text=${type}+${selectedGender}`;
        }
    }

    function restart() {
        currentQ = 0;
        scores = { EI: 0, SN: 0, TF: 0, JP: 0 };
        selectedGender = null;
        document.getElementById('result-page').classList.add('hidden');
        document.getElementById('start-page').classList.remove('hidden');
        document.getElementById('progress-bar').style.width = '0%';
        
        if (imageUrls["cover"]) {
            document.getElementById('cover-img').src = imageUrls["cover"];
        }
    }

    const resultsData = {
        "ISTJ": { 
            title: { boy: "å¾¡ç”¨ä¿é‘£", girl: "å…¨èƒ½å¥³åƒ•é•·" }, 
            tags: ["åš´è‚…", "ç§©åºé­”äºº", "å¿ èª "], 
            desc: {
                boy: "å¤©ç”Ÿçš„å®ˆè­·è€…ï¼ä»–å°±åƒå€‹åš´è‚…çš„çš‡å®¶ä¿é‘£ï¼Œéš¨æ™‚å·¡è¦–å®¶åœ’å®‰å…¨ã€‚ä¸å–œæ­¡é©šå–œï¼Œç”Ÿæ´»å¿…é ˆæŒ‰è¡¨æ“èª²ï¼Œæ˜¯ä½ æœ€å¯é çš„å¿ èª å¤¥ä¼´ã€‚",
                girl: "å®¶è£¡çš„ç§©åºå¥³ç‹ï¼çœ‹ä¸æ…£å®¶è£¡äº‚ä¸ƒå…«ç³Ÿï¼Œæœƒåƒå¥³åƒ•é•·ä¸€æ¨£ç£ä¿ƒå¤§å®¶ã€‚å¥¹åšäº‹ä¸€çµ²ä¸è‹Ÿï¼Œè¦çŸ©å¾ˆå¤šï¼Œä½†æŠŠå®¶è£¡æ‰“ç†å¾—äº•äº•æœ‰æ¢ã€‚"
            }
        },
        "ISFJ": { 
            title: { boy: "æº«æŸ”å¤§æš–ç”·", girl: "è»ŸèŒå°è­·å£«" }, 
            tags: ["è²¼å¿ƒ", "é»äººç²¾", "ç»ç’ƒå¿ƒ"], 
            desc: {
                boy: "å¿ƒæ€ç´°è†©çš„å¤§ç”·å­©ï¼Œç¨å¾®å¤§è²ç½µä»–å°±æœƒå—å‚·ã€‚æœ€å–œæ­¡å®‰éœåœ°é™ªåœ¨ä½ èº«é‚Šï¼Œç•¶ä½ å¿ƒæƒ…ä¸å¥½æ™‚ï¼Œä»–æ˜¯æœ€æ£’çš„è†è½è€…èˆ‡é™ªä¼´è€…ã€‚",
                girl: "åƒå€‹è²¼å¿ƒçš„å°è­·å£«ï¼Œéš¨æ™‚æ³¨æ„ä¸»äººçš„æƒ…ç·’è®ŠåŒ–ã€‚éå¸¸é»äººï¼Œçœ¼ç¥å……æ»¿æ„›æ„ï¼Œæ˜¯ä½ ç–²æ†Šæ™‚æœ€å¥½çš„ç™‚ç™’ç‰¹æ•ˆè—¥ã€‚"
            }
        },
        "INFJ": { 
            title: "éˆæ€§è®€å¿ƒå¸«", 
            tags: ["çœ¼ç¥æœ‰æˆ²", "æ·±æ²‰", "ç¥ç¥•"], 
            desc: "çœ¼ç¥å½·å½¿çœ‹é€ä¸€åˆ‡ã€‚ä¸å–œæ­¡åµé¬§ï¼Œå–œæ­¡å®‰éœè§€å¯Ÿï¼ŒèƒŒæ™¯è‡ªå¸¶ç¥ç§˜æ°£å ´ã€‚é—œéµæ™‚åˆ»æœƒå±•ç¾é©šäººçš„è°æ˜ï¼Œå½·å½¿è½å¾—æ‡‚äººè©±ã€‚" 
        },
        "INTJ": { 
            title: "é«˜å†·ç­–åŠƒå¸«", 
            tags: ["ç¨ç«‹", "å‚²å¬Œ", "è°æ˜çµ•é ‚"], 
            desc: "æœ‰è‡ªå·±çš„æƒ³æ³•ï¼Œè¦ºå¾—è‡ªå·±æ¯”ä¸»äººè°æ˜ã€‚æ•™æ–°æŒ‡ä»¤æ™‚ï¼Œç‰ ä¸æ˜¯å­¸ä¸æœƒï¼Œæ˜¯çœ‹å¿ƒæƒ…åšã€‚æ°£è³ªé«˜é›…ï¼Œè‡ªå¸¶è²´æ—æ°£æ¯ã€‚" 
        },
        "ISTP": { 
            title: { boy: "æ‹†å®¶å·¥ç¨‹å¸«", girl: "è’é‡æ¢éšªå®¶" },
            tags: ["å¥½å¥‡å¯¶å¯¶", "æ‰‹è³¤", "æ„›å†’éšª"], 
            desc: {
                boy: "å°å®¶è£¡çš„ä¸€åˆ‡æ§‹é€ éƒ½å……æ»¿å¥½å¥‡ï¼å˜´è£¡ç¸½è¦å’¬é»åƒæ‰³æ‰‹ä¸€æ¨£ç¡¬çš„æ±è¥¿ï¼Œå‹•æ‰‹èƒ½åŠ›æ¥µå¼·ï¼Œä¸æ˜¯åœ¨æ‹†ç©å…·ï¼Œå°±æ˜¯åœ¨ç ”ç©¶æ€éº¼æ‹†å®¶ã€‚",
                girl: "å¤©ç”Ÿçš„å†’éšªå®¶ï¼ä¸å–œæ­¡å¾…åœ¨å®¤å…§ç•¶ä¹–ä¹–ç‰Œï¼Œå–œæ­¡åœ¨è‰å¢ã€æ³¥å·´è£¡æ‰“æ»¾æ¢ç´¢ã€‚å¤§è†½åˆç¨ç«‹ï¼Œæ“æœ‰æ¥µå¼·çš„é‡å¤–æ±‚ç”Ÿæœ¬èƒ½ã€‚"
            }
        },
        "ISFP": { 
            title: "å„ªé›…è—è¡“å®¶", 
            tags: ["éš¨æ€§", "ç¾æ„Ÿ", "æ„›ç¡è¦º"], 
            desc: "æ‡‚å¾—äº«å—ç”Ÿæ´»ï¼Œè¦åœ¨æœ€è»Ÿçš„å¢Šå­ç¡è¦ºï¼Œå°ç¾æ„Ÿæœ‰å …æŒã€‚å¿ƒæƒ…å¥½æ™‚è¦ªäººï¼Œå¿ƒæƒ…ä¸å¥½è«‹å‹¿æ‰“æ“¾ï¼Œæ˜¯ä¸€éš»å……æ»¿è—è¡“æ°£æ¯çš„ç‹—ç‹—ã€‚" 
        },
        "INFP": { 
            title: "å¤¢å¹»å°å¤©ä½¿", 
            tags: ["å‘†èŒ", "å’Œå¹³ä¸»ç¾©", "è†½å°"], 
            desc: "æ´»åœ¨è‡ªå·±çš„å°æ³¡æ³¡è£¡ï¼Œå¸¸å¸¸çœ‹è‘—çª—å¤–ç™¼å‘†ã€‚å€‹æ€§æº«å’Œï¼Œå°ä¸»äººä¾è³´æ·±ï¼Œéœ€è¦ç”¨æ»¿æ»¿çš„æ„›å»çŒæº‰ï¼Œå°±åƒç«¥è©±è£¡èµ°å‡ºä¾†çš„è§’è‰²ã€‚" 
        },
        "INTP": { 
            title: "æ€ªå¥‡ç§‘å­¸å®¶", 
            tags: ["è…¦æ´å¤§", "æ‡¶æ´‹æ´‹", "å¤éˆç²¾æ€ª"], 
            desc: "å¸¸åšå‡ºäººé¡ç„¡æ³•ç†è§£çš„æ€ªå§¿å‹¢ï¼Œæˆ´è‘—çœ¼é¡ä¸€è‡‰è°æ˜æ¨£ï¼Œä½†å…¶å¯¦åªæ˜¯åœ¨ç™¼å‘†ã€‚å°ç¤¾äº¤æ²’èˆˆè¶£ï¼Œæ¯”è¼ƒå–œæ­¡ç ”ç©¶çƒç‚ºä»€éº¼æœƒå½ˆã€‚" 
        },
        "ESTP": { 
            title: { boy: "è¡—é ­æ»‘æ¿ç‹", girl: "æ´»åŠ›ç™¼é›»æ©Ÿ" },
            tags: ["éå‹•", "å¤§è†½", "ç ´å£ç‹"], 
            desc: {
                boy: "å…¬åœ’è£¡æœ€é…·çš„æ»‘æ¿é«˜æ‰‹ï¼ç©¿è‘—çš®è¡£å¸¥æ°£ç™»å ´ï¼Œè¿½æ±‚é€Ÿåº¦èˆ‡åˆºæ¿€ã€‚ç²¾åŠ›æ—ºç››åœä¸ä¸‹ä¾†ï¼Œæ˜¯å€‹æ°¸é é•·ä¸å¤§çš„å¸¥æ°£æ—è›‹é¬¼ã€‚",
                girl: "å¥¹æ˜¯èšæœƒè£¡çš„æ°£æ°›æ“”ç•¶ï¼åƒè£äº†å‹é‡é›»æ± ä¸€æ¨£æ°¸é ä¸ç´¯ï¼Œå“ªè£¡ç†±é¬§å°±å¾€å“ªè£¡é‘½ã€‚ç†±æ„›ç¤¾äº¤èˆ‡éŠæˆ²ï¼Œæœ‰å¥¹åœ¨çš„åœ°æ–¹çµ•å°ä¸æœƒå†·å ´ã€‚"
            }
        },
        "ESFP": { 
            title: { boy: "æ–æ»¾å·¨æ˜Ÿ", girl: "é–ƒäº®èˆå" },
            tags: ["äººä¾†ç˜‹", "æ„›æ¼”", "è²ªåƒ"], 
            desc: {
                boy: "è‡ªå¸¶è²“ç‹æ¿¾é¡ï¼åªè¦æœ‰äººçœ‹ï¼Œä»–å°±æœƒé–‹å§‹è¡¨æ¼”å”±æ­Œæˆ–æ‰è—ã€‚ç„¡æ³•å¿å—ç„¡èŠï¼Œè¦ºå¾—æ•´å€‹ä¸–ç•Œéƒ½æ˜¯ä»–çš„èˆå°ï¼Œéå¸¸äº«å—æŒè²ã€‚",
                girl: "å„ªé›…åˆæ„›ç¾çš„èŠ­è•¾åä¼¶ï¼å–œæ­¡ç©¿å¾—æ¼‚æ¼‚äº®äº®å‡ºé–€ï¼Œåœ¨ç‹—å…¬åœ’è£¡å„ªé›…åœ°è½‰åœˆåœˆå¸å¼•ç›®å…‰ã€‚å¥¹æ˜¯å¤©ç”Ÿçš„æ˜æ˜Ÿï¼Œçµ•å°ä¸èƒ½è¢«å¿½è¦–ã€‚"
            }
        },
        "ENFP": { 
            title: "å¿«æ¨‚æºæ³‰", 
            tags: ["ç†±æƒ…", "å¥å¿˜", "å‹å–„"], 
            desc: "å°ä¸–ç•Œå……æ»¿æ„›ï¼å°±åƒå•¦å•¦éšŠé•·ä¸€æ¨£ï¼Œéš¨æ™‚éš¨åœ°éƒ½åœ¨å¹«ä½ åŠ æ²¹æ‰“æ°£ã€‚ä¸Šä¸€ç§’ç©çƒï¼Œä¸‹ä¸€ç§’è¿½è´è¶ï¼Œå°ˆæ³¨åŠ›ä½ä½†å¯æ„›åº¦çˆ†è¡¨ã€‚" 
        },
        "ENTP": { 
            title: { boy: "å˜»å“ˆå¿«å˜´ç‹", girl: "ç¤¾äº¤å°æƒ¡é­”" },
            tags: ["å”±åèª¿", "è°æ˜å£", "äº’å‹•å¤š"], 
            desc: {
                boy: "è¶…æ„›é ‚å˜´ï¼ä½ èªªä¸€å¥ä»–å›ä¸‰å¥ï¼Œåƒå€‹å˜»å“ˆæ­Œæ‰‹åœ¨è·Ÿä½  Battleã€‚è°æ˜çµ•é ‚ä½†å°ˆé–€ç”¨åœ¨æ—è›‹ä¸Šï¼Œæ¯å¤©éƒ½åœ¨æŒ‘æˆ°ä½ çš„åº•ç·šã€‚",
                girl: "æ´¾å°è£¡çš„è°æ˜å£å¥³å­©ï¼æ“…é•·ç”¨é­…åŠ›å’Œæ™ºå•†æ“æ§å…¶ä»–ç‹—ç‹—ï¼ˆå’Œä¸»äººï¼‰ã€‚æœ‰é»å°å£å¿ƒçœ¼ä½†åˆè®“äººè¨å­ä¸èµ·ä¾†ï¼Œæ˜¯ç¤¾äº¤åœˆçš„å¤§å§é ­ã€‚"
            }
        },
        "ESTJ": { 
            title: { boy: "è¯çˆ¾è¡—èè‹±", girl: "åš´æ ¼ç®¡ç†å“¡" },
            tags: ["å¼·å‹¢", "ç®¡å¾ˆå¤š", "è¦å¾‹"], 
            desc: {
                boy: "çœ‹è‘—è‚¡å¸‚åœ–è¡¨çš„èè‹±ä»½å­ï¼å°åƒé£¯æ™‚é–“ã€æ•£æ­¥è·¯ç·šæœ‰åš´æ ¼çš„æ§åˆ¶æ¬²ã€‚éå¸¸å¼·å‹¢ï¼Œè¦ºå¾—è‡ªå·±æ‰æ˜¯å®¶è£¡çš„è€å¤§ï¼Œé€™é ­å®¶æ˜¯ä»–èªªäº†ç®—ã€‚",
                girl: "åœ–æ›¸é¤¨è£¡é‚£ä½åš´è‚…çš„ç®¡ç†å“¡é˜¿å§¨ï¼ä¸å–œæ­¡å®¶è£¡å¤ªåµé¬§ï¼Œæœƒç”¨çœ¼ç¥åˆ¶æ­¢ä½ åšè ¢äº‹ã€‚éå¸¸å®ˆè¦çŸ©ï¼Œè‡´åŠ›æ–¼ç¶­è­·å®¶è£¡çš„å’Œå¹³èˆ‡ç§©åºã€‚"
            }
        },
        "ESFJ": { 
            title: "æš–å¿ƒæ‹›å¾…æ‰€", 
            tags: ["æ„›é¤µé£Ÿ", "å»šæˆ¿å®ˆè­·è€…", "ç†±æƒ…å¥½å®¢"], 
            desc: "ç‰ å°±æ˜¯å®¶è£¡çš„äº”æ˜Ÿç´šå¤§å»šèˆ‡æ¥å¾…å“¡ï¼éå¸¸é‡è¦–åƒé£¯å„€å¼æ„Ÿï¼Œæ›´å–œæ­¡ç†±é¬§çš„å®¶åº­èšæœƒã€‚ç‰ æœƒç¢ºèªæ¯å€‹äººéƒ½åƒé£½å–è¶³ï¼Œæ˜¯å®¶è£¡æœ€æº«æš–ã€æœ€æœƒç…§é¡§äººçš„å­˜åœ¨ã€‚" 
        },
        "ENFJ": { 
            title: "é­…åŠ›äººæ°£ç‹", 
            tags: ["è‡ªå¸¶å…‰ç’°", "æ’’å¬Œé¬¼", "è°æ˜"], 
            desc: "å¤©ç”Ÿçš„é ˜è¢–æ°£è³ªï¼ç”·å¯¶åƒå€‹è¶…ç´šè‹±é›„ï¼Œå¥³å¯¶åƒå€‹é–ƒäº®å¶åƒã€‚ç‰ æ‡‚å¾—åˆ©ç”¨å¯æ„›èˆ‡é­…åŠ›ä¾†æ”¶æœäººé¡ï¼Œåœ¨ç‹—ç¾¤ä¸­é€šå¸¸ä¹Ÿå¾ˆå—æ­¡è¿ï¼Œå¤§å®¶éƒ½è½ç‰ çš„ã€‚" 
        },
        "ENTJ": { 
            title: { boy: "éœ¸é“ç¸½è£", girl: "é«˜å†·å¥³ç‹" },
            tags: ["æ°£å ´å¼·", "å›ºåŸ·", "ç›®æ¨™å°å‘"], 
            desc: {
                boy: "ç©¿è‘—è¥¿è£çš„éœ¸é“ç¸½è£ï¼èµ°è·¯æœ‰é¢¨ï¼Œçœ¼ç¥éŠ³åˆ©ã€‚ç‚ºäº†å¾—åˆ°çš„é›¶é£Ÿæˆ–ç©å…·æœƒä¸æ“‡æ‰‹æ®µï¼Œæ„å¿—åŠ›å …å®šï¼Œçµ•å°ä¸æ¥å—ã€ä¸ã€é€™å€‹ç­”æ¡ˆã€‚",
                girl: "æˆ´è‘—çš‡å† çš„é«˜å‚²å¥³ç‹ï¼èªç‚ºäººé¡å°±æ˜¯ä¾†æœä¾å¥¹çš„ã€‚æ°£å ´å¼·å¤§ï¼Œé€£å¤§ç‹—çœ‹åˆ°å¥¹éƒ½è¦è®“è·¯ä¸‰åˆ†ï¼Œæ˜¯å¤©ç”Ÿçš„çµ±æ²»è€…ã€‚"
            }
        }
    };
</script>
</body>
</html>
